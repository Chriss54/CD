---
phase: 01-foundation
plan: 03
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - src/app/(main)/layout.tsx
  - src/app/(main)/page.tsx
  - src/app/(main)/feed/page.tsx
  - src/app/(main)/classroom/page.tsx
  - src/app/(main)/calendar/page.tsx
  - src/app/(main)/members/page.tsx
  - src/components/layout/header.tsx
  - src/components/layout/sidebar.tsx
  - src/components/layout/nav-link.tsx
  - src/components/ui/button.tsx
autonomous: true

must_haves:
  truths:
    - "Root layout displays navigation shell"
    - "Sidebar shows navigation links to all placeholder routes"
    - "Active route is visually highlighted in navigation"
    - "All placeholder routes render without errors"
  artifacts:
    - path: "src/app/(main)/layout.tsx"
      provides: "Main app layout with sidebar and header"
      min_lines: 20
    - path: "src/components/layout/sidebar.tsx"
      provides: "Navigation sidebar component"
      min_lines: 20
    - path: "src/components/layout/nav-link.tsx"
      provides: "Client component for active state detection"
      contains: "use client"
    - path: "src/app/(main)/feed/page.tsx"
      provides: "Feed placeholder page"
  key_links:
    - from: "src/app/(main)/layout.tsx"
      to: "src/components/layout/sidebar.tsx"
      via: "component import"
      pattern: "import.*Sidebar"
    - from: "src/components/layout/nav-link.tsx"
      to: "next/navigation"
      via: "usePathname hook"
      pattern: "usePathname"
---

<objective>
Create the application shell with navigation sidebar, header, and placeholder routes for all major features.

Purpose: Establish the visual structure and routing foundation that all features will be built within. This creates the "skeleton" of the app that users will navigate.

Output: Working app shell with sidebar navigation, header, and placeholder pages for Home, Feed, Classroom, Calendar, and Members.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation/01-RESEARCH.md

Key patterns from research:
- Use route groups: (main) for app shell, (auth) for login/register
- Server components by default - only add "use client" where needed (usePathname)
- Push client boundaries as deep as possible (NavLink, not entire Sidebar)
- Use cn() utility for conditional classes
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create layout components (Sidebar, Header, NavLink)</name>
  <files>
    src/components/layout/sidebar.tsx
    src/components/layout/header.tsx
    src/components/layout/nav-link.tsx
    src/components/ui/button.tsx
  </files>
  <action>
Create src/components/layout/nav-link.tsx (Client Component - needs usePathname):
```typescript
'use client';

import Link from 'next/link';
import { usePathname } from 'next/navigation';
import { cn } from '@/lib/utils';

interface NavLinkProps {
  href: string;
  label: string;
  icon?: React.ReactNode;
}

export function NavLink({ href, label, icon }: NavLinkProps) {
  const pathname = usePathname();
  const isActive = pathname === href || (href !== '/' && pathname.startsWith(href));

  return (
    <Link
      href={href}
      className={cn(
        'flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors',
        isActive
          ? 'bg-primary text-primary-foreground'
          : 'text-muted-foreground hover:bg-muted hover:text-foreground'
      )}
    >
      {icon}
      <span>{label}</span>
    </Link>
  );
}
```

Create src/components/layout/sidebar.tsx (Server Component - no hooks):
```typescript
import { NavLink } from './nav-link';

const navLinks = [
  { href: '/', label: 'Home' },
  { href: '/feed', label: 'Feed' },
  { href: '/classroom', label: 'Classroom' },
  { href: '/calendar', label: 'Calendar' },
  { href: '/members', label: 'Members' },
];

export function Sidebar() {
  return (
    <aside className="w-64 border-r border-border bg-muted/30 flex flex-col">
      {/* Logo/Brand */}
      <div className="h-16 flex items-center px-6 border-b border-border">
        <span className="text-xl font-bold text-foreground">Community</span>
      </div>

      {/* Navigation */}
      <nav className="flex-1 p-4 space-y-1">
        {navLinks.map((link) => (
          <NavLink key={link.href} {...link} />
        ))}
      </nav>

      {/* Footer - placeholder for user menu */}
      <div className="p-4 border-t border-border">
        <div className="flex items-center gap-3 px-3 py-2 text-sm text-muted-foreground">
          <div className="w-8 h-8 rounded-full bg-muted" />
          <span>Guest User</span>
        </div>
      </div>
    </aside>
  );
}
```

Create src/components/layout/header.tsx (Server Component):
```typescript
export function Header() {
  return (
    <header className="h-16 border-b border-border bg-background flex items-center justify-between px-6">
      <div>
        {/* Breadcrumb or page title - filled by pages later */}
      </div>
      <div className="flex items-center gap-4">
        {/* Placeholder for notifications, user menu */}
        <div className="w-8 h-8 rounded-full bg-muted" />
      </div>
    </header>
  );
}
```

Create src/components/ui/button.tsx (reusable button component):
```typescript
import { cn } from '@/lib/utils';
import { forwardRef } from 'react';

export interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'default' | 'secondary' | 'outline' | 'ghost' | 'destructive';
  size?: 'default' | 'sm' | 'lg' | 'icon';
}

const Button = forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant = 'default', size = 'default', ...props }, ref) => {
    return (
      <button
        className={cn(
          'inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors',
          'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2',
          'disabled:pointer-events-none disabled:opacity-50',
          // Variants
          variant === 'default' && 'bg-primary text-primary-foreground hover:bg-primary/90',
          variant === 'secondary' && 'bg-secondary text-primary-foreground hover:bg-secondary/90',
          variant === 'outline' && 'border border-border bg-background hover:bg-muted',
          variant === 'ghost' && 'hover:bg-muted',
          variant === 'destructive' && 'bg-destructive text-primary-foreground hover:bg-destructive/90',
          // Sizes
          size === 'default' && 'h-10 px-4 py-2',
          size === 'sm' && 'h-9 px-3',
          size === 'lg' && 'h-11 px-8',
          size === 'icon' && 'h-10 w-10',
          className
        )}
        ref={ref}
        {...props}
      />
    );
  }
);

Button.displayName = 'Button';

export { Button };
```
  </action>
  <verify>
- `cat src/components/layout/nav-link.tsx | grep "use client"` shows client directive
- `cat src/components/layout/sidebar.tsx` does NOT contain "use client"
- `cat src/components/layout/header.tsx` does NOT contain "use client"
- All files compile without TypeScript errors
  </verify>
  <done>Layout components created with correct server/client boundaries</done>
</task>

<task type="auto">
  <name>Task 2: Create route group and placeholder pages</name>
  <files>
    src/app/(main)/layout.tsx
    src/app/(main)/page.tsx
    src/app/(main)/feed/page.tsx
    src/app/(main)/classroom/page.tsx
    src/app/(main)/calendar/page.tsx
    src/app/(main)/members/page.tsx
  </files>
  <action>
Create the (main) route group with layout. This groups all app routes under a shared shell.

Create src/app/(main)/layout.tsx:
```typescript
import { Sidebar } from '@/components/layout/sidebar';
import { Header } from '@/components/layout/header';

export default function MainLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <div className="flex min-h-screen">
      <Sidebar />
      <div className="flex-1 flex flex-col">
        <Header />
        <main className="flex-1 p-6 overflow-auto">
          {children}
        </main>
      </div>
    </div>
  );
}
```

Create src/app/(main)/page.tsx (Home/Dashboard):
```typescript
export default function HomePage() {
  return (
    <div className="space-y-6">
      <h1 className="text-3xl font-bold">Welcome to the Community</h1>
      <p className="text-muted-foreground">
        This is your community dashboard. Features coming soon:
      </p>
      <ul className="list-disc list-inside text-muted-foreground space-y-2">
        <li>Activity feed with posts and discussions</li>
        <li>Courses and learning content</li>
        <li>Events calendar</li>
        <li>Member directory</li>
        <li>Points and leaderboards</li>
      </ul>
    </div>
  );
}
```

Create placeholder pages for each route:

src/app/(main)/feed/page.tsx:
```typescript
export default function FeedPage() {
  return (
    <div className="space-y-6">
      <h1 className="text-3xl font-bold">Feed</h1>
      <p className="text-muted-foreground">
        Community posts and discussions will appear here.
      </p>
      <div className="border border-dashed border-border rounded-lg p-8 text-center text-muted-foreground">
        Posts coming in Phase 4
      </div>
    </div>
  );
}
```

src/app/(main)/classroom/page.tsx:
```typescript
export default function ClassroomPage() {
  return (
    <div className="space-y-6">
      <h1 className="text-3xl font-bold">Classroom</h1>
      <p className="text-muted-foreground">
        Courses and learning content will appear here.
      </p>
      <div className="border border-dashed border-border rounded-lg p-8 text-center text-muted-foreground">
        Courses coming in Phase 6-7
      </div>
    </div>
  );
}
```

src/app/(main)/calendar/page.tsx:
```typescript
export default function CalendarPage() {
  return (
    <div className="space-y-6">
      <h1 className="text-3xl font-bold">Calendar</h1>
      <p className="text-muted-foreground">
        Upcoming events will appear here.
      </p>
      <div className="border border-dashed border-border rounded-lg p-8 text-center text-muted-foreground">
        Events coming in Phase 8
      </div>
    </div>
  );
}
```

src/app/(main)/members/page.tsx:
```typescript
export default function MembersPage() {
  return (
    <div className="space-y-6">
      <h1 className="text-3xl font-bold">Members</h1>
      <p className="text-muted-foreground">
        Community member directory will appear here.
      </p>
      <div className="border border-dashed border-border rounded-lg p-8 text-center text-muted-foreground">
        Member directory coming in Phase 3
      </div>
    </div>
  );
}
```

Remove the old src/app/page.tsx if it exists (route group now handles home).
  </action>
  <verify>
- `ls src/app/\(main\)/` shows layout.tsx and page.tsx
- `ls src/app/\(main\)/feed/` shows page.tsx
- `ls src/app/\(main\)/classroom/` shows page.tsx
- `ls src/app/\(main\)/calendar/` shows page.tsx
- `ls src/app/\(main\)/members/` shows page.tsx
  </verify>
  <done>Route group structure created with all placeholder pages</done>
</task>

<task type="auto">
  <name>Task 3: Verify navigation and styling</name>
  <files>
    src/app/layout.tsx
  </files>
  <action>
Ensure the root layout properly imports globals.css and sets up the HTML structure:

Update src/app/layout.tsx if needed:
```typescript
import type { Metadata } from 'next';
import { Inter } from 'next/font/google';
import './globals.css';

const inter = Inter({
  subsets: ['latin'],
  variable: '--font-inter',
});

export const metadata: Metadata = {
  title: 'Community Platform',
  description: 'A community platform for learning and engagement',
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en">
      <body className={`${inter.variable} font-sans antialiased`}>
        {children}
      </body>
    </html>
  );
}
```

Start the development server and verify:
```bash
npm run dev
```

Test navigation by visiting each route:
- http://localhost:3000 (Home)
- http://localhost:3000/feed
- http://localhost:3000/classroom
- http://localhost:3000/calendar
- http://localhost:3000/members

Verify:
1. Sidebar appears on all pages
2. Navigation links work (clicking changes route)
3. Active route is highlighted in sidebar
4. Tailwind styles apply correctly (colors, spacing, typography)
5. No console errors
  </action>
  <verify>
- `npm run dev` starts without errors
- All 5 routes load without errors
- Sidebar navigation works (clicking changes pages)
- Active state visible on current route in sidebar
- Tailwind classes render correctly
  </verify>
  <done>App shell is functional with working navigation between all placeholder routes</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `npm run dev` - App starts and displays shell
2. Navigate to each route - All load without errors
3. Click sidebar links - Navigation works
4. Check active state - Current route highlighted in sidebar
5. `npm run build` - Production build succeeds
6. No "use client" in layout.tsx or sidebar.tsx
7. "use client" present in nav-link.tsx
</verification>

<success_criteria>
- Route group (main) contains layout with sidebar and header
- All placeholder pages exist: Home, Feed, Classroom, Calendar, Members
- NavLink correctly detects and highlights active route
- Server/client boundaries correct (only NavLink is client component)
- Sidebar navigation works to switch between routes
- Tailwind v4 styles apply correctly (colors from @theme)
- No TypeScript or ESLint errors
- Production build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-03-SUMMARY.md`
</output>
