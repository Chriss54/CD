---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - tsconfig.json
  - next.config.ts
  - postcss.config.mjs
  - src/app/globals.css
  - src/app/layout.tsx
  - src/app/page.tsx
  - src/lib/utils.ts
  - .env.local.example
  - .gitignore
autonomous: true

must_haves:
  truths:
    - "Next.js 16 development server starts with Turbopack"
    - "TypeScript compilation succeeds without errors"
    - "Tailwind CSS v4 styles apply to the page"
    - "ESLint runs without critical errors"
  artifacts:
    - path: "package.json"
      provides: "Project dependencies and scripts"
      contains: "next"
    - path: "src/app/layout.tsx"
      provides: "Root layout with Tailwind"
      min_lines: 15
    - path: "src/app/globals.css"
      provides: "Tailwind v4 CSS-first config"
      contains: "@import"
    - path: "postcss.config.mjs"
      provides: "PostCSS configuration for Tailwind v4"
      contains: "@tailwindcss/postcss"
  key_links:
    - from: "src/app/layout.tsx"
      to: "src/app/globals.css"
      via: "CSS import"
      pattern: "import.*globals.css"
    - from: "postcss.config.mjs"
      to: "@tailwindcss/postcss"
      via: "plugin registration"
      pattern: "@tailwindcss/postcss"
---

<objective>
Scaffold Next.js 16 project with TypeScript, Tailwind CSS v4, and ESLint configuration.

Purpose: Create the foundational project structure that all subsequent phases build upon. This is the first step - nothing can proceed without a working Next.js application.

Output: A working Next.js 16 app that starts with `npm run dev`, displays a styled page, and passes linting.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation/01-RESEARCH.md

Key patterns from research:
- Tailwind v4 uses CSS-first config with @theme directive (no tailwind.config.js)
- PostCSS requires @tailwindcss/postcss plugin
- next.config.ts uses TypeScript (not .js)
- Turbopack is default in Next.js 16 (no --turbopack flag needed)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Next.js 16 project</name>
  <files>
    package.json
    tsconfig.json
    next.config.ts
    src/app/layout.tsx
    src/app/page.tsx
    .gitignore
  </files>
  <action>
Run `npx create-next-app@latest . --typescript --eslint --app --src-dir --import-alias "@/*" --yes` to scaffold the project.

After scaffolding:
1. Verify package.json has Next.js 16.x (not 15.x)
2. Remove any generated tailwind.config.js or tailwind.config.ts (Tailwind v4 uses CSS-first)
3. Update next.config.ts to enable turbopackFileSystemCacheForBuild:
   ```typescript
   import type { NextConfig } from 'next';

   const nextConfig: NextConfig = {
     experimental: {
       turbopackFileSystemCacheForBuild: true,
     },
   };

   export default nextConfig;
   ```

Do NOT add any additional dependencies yet - those come in subsequent tasks.
  </action>
  <verify>
- `cat package.json | grep '"next"'` shows version 16.x
- `ls -la` shows src/app/ directory exists
- `ls tailwind.config.*` returns "No such file" (config file removed)
  </verify>
  <done>Next.js 16 project structure exists with App Router in src/app/</done>
</task>

<task type="auto">
  <name>Task 2: Configure Tailwind CSS v4 with PostCSS</name>
  <files>
    package.json
    postcss.config.mjs
    src/app/globals.css
  </files>
  <action>
Install Tailwind v4 dependencies:
```bash
npm install tailwindcss @tailwindcss/postcss postcss
```

Create postcss.config.mjs (ESM format required):
```javascript
const config = {
  plugins: {
    '@tailwindcss/postcss': {},
  },
};
export default config;
```

Replace src/app/globals.css with Tailwind v4 CSS-first configuration:
```css
@import "tailwindcss";

/* Custom theme tokens - replaces tailwind.config.js */
@theme {
  --color-primary: #6366f1;
  --color-primary-foreground: #ffffff;
  --color-secondary: #8b5cf6;
  --color-background: #ffffff;
  --color-foreground: #0a0a0a;
  --color-muted: #f4f4f5;
  --color-muted-foreground: #71717a;
  --color-border: #e4e4e7;
  --color-destructive: #ef4444;
  --color-success: #22c55e;

  --font-sans: 'Inter', system-ui, sans-serif;
  --radius-default: 0.5rem;
}

/* Dark mode */
@media (prefers-color-scheme: dark) {
  @theme {
    --color-background: #0a0a0a;
    --color-foreground: #fafafa;
    --color-muted: #27272a;
    --color-muted-foreground: #a1a1aa;
    --color-border: #3f3f46;
  }
}

/* Base styles */
body {
  background-color: var(--color-background);
  color: var(--color-foreground);
  font-family: var(--font-sans);
}
```

IMPORTANT: Delete any existing tailwind.config.js or tailwind.config.ts file - Tailwind v4 uses CSS-first configuration only.
  </action>
  <verify>
- `cat postcss.config.mjs` contains "@tailwindcss/postcss"
- `cat src/app/globals.css` contains "@import" and "@theme"
- `ls tailwind.config.*` returns "No such file or directory"
  </verify>
  <done>Tailwind v4 is configured with CSS-first @theme tokens and PostCSS plugin</done>
</task>

<task type="auto">
  <name>Task 3: Add utility helpers and environment template</name>
  <files>
    src/lib/utils.ts
    .env.local.example
  </files>
  <action>
Create src/lib/utils.ts with common utilities:
```typescript
import { type ClassValue, clsx } from 'clsx';
import { twMerge } from 'tailwind-merge';

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
```

Install the utility dependencies:
```bash
npm install clsx tailwind-merge
```

Create .env.local.example as a template (user will copy to .env.local):
```env
# Supabase PostgreSQL - Pooled connection (runtime)
# Get from: Supabase Dashboard -> Project Settings -> Database -> Connection string
DATABASE_URL="postgres://postgres.[project]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres?pgbouncer=true"

# Supabase PostgreSQL - Direct connection (migrations)
# Get from: Supabase Dashboard -> Project Settings -> Database -> Connection string (Session mode)
DIRECT_URL="postgres://postgres.[project]:[password]@aws-0-[region].pooler.supabase.com:5432/postgres"

# NextAuth (Phase 2)
NEXTAUTH_SECRET="generate-with-openssl-rand-base64-32"
NEXTAUTH_URL="http://localhost:3000"
```

Update .gitignore to ensure .env.local is ignored (should already be there from create-next-app, but verify):
- .env.local should be in .gitignore
- .env.local.example should NOT be gitignored

Verify the app starts and displays correctly:
```bash
npm run dev
```
Visit http://localhost:3000 and confirm the page loads with styling.
  </action>
  <verify>
- `cat src/lib/utils.ts` contains "cn" function
- `cat .env.local.example` contains "DATABASE_URL"
- `npm run dev` starts without errors
- Visiting http://localhost:3000 shows styled page
  </verify>
  <done>Utility functions exist, environment template created, development server runs successfully</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `npm run dev` - Server starts on localhost:3000 with Turbopack
2. `npm run build` - Production build succeeds
3. `npm run lint` - ESLint passes (warnings OK, no errors)
4. Browser shows styled page at localhost:3000
5. TypeScript compilation has no errors
</verification>

<success_criteria>
- Next.js 16 project exists with src/app/ structure
- Tailwind CSS v4 configured with @theme tokens (no tailwind.config.js)
- PostCSS configured with @tailwindcss/postcss
- Development server starts successfully
- Production build succeeds
- ESLint runs without errors
- cn() utility function available
- Environment template (.env.local.example) documents required variables
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
